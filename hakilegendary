-- Tá»± Ä‘á»™ng hop server cÃ³ Haki Legendary vÃ  mua
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- HÃ m kiá»ƒm tra NPC bÃ¡n Haki Legendary
function isHakiLegendaryAvailable()
    for _, npc in pairs(workspace:GetChildren()) do
        if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") then
            if string.find(npc.Name, "Legendary Haki Seller") then
                print("âœ… TÃ¬m tháº¥y NPC bÃ¡n Haki Legendary!")
                return true
            end
        end
    end
    return false
end

-- HÃ m tá»± Ä‘á»™ng mua Haki náº¿u cÃ³ Ä‘á»§ tiá»n
function buyHakiLegendary()
    local money = LocalPlayer.Data.Beli.Value -- Láº¥y sá»‘ tiá»n hiá»‡n táº¡i
    local hakiPrice = 2500000 -- GiÃ¡ Haki Legendary (cÃ³ thá»ƒ thay Ä‘á»•i)

    if money >= hakiPrice then
        print("ğŸ’° Äá»§ tiá»n, Ä‘ang mua Haki Legendary...")
        ReplicatedStorage.Remotes.CommF_:InvokeServer("BuyLegendaryHaki")
        wait(2)
        if isHakiLegendaryAvailable() == false then
            print("ğŸ‰ ÄÃ£ mua thÃ nh cÃ´ng Haki Legendary!")
            return true
        end
    else
        print("âŒ KhÃ´ng Ä‘á»§ tiá»n Ä‘á»ƒ mua Haki Legendary!")
    end
    return false
end

-- HÃ m láº¥y danh sÃ¡ch server
function getServers()
    local servers = {}
    local placeID = game.PlaceId
    local url = "https://games.roblox.com/v1/games/" .. placeID .. "/servers/Public?sortOrder=Desc&limit=100"

    local success, response = pcall(function()
        return HttpService:JSONDecode(game:HttpGet(url))
    end)

    if success and response and response.data then
        for _, server in ipairs(response.data) do
            if server.playing < server.maxPlayers then
                table.insert(servers, server.id)
            end
        end
    end

    return servers
end

-- HÃ m tá»± Ä‘á»™ng hop server
function autoHop()
    if isHakiLegendaryAvailable() then
        if buyHakiLegendary() then
            print("âœ… ÄÃ£ mua Haki Legendary, dá»«ng hop server.")
            return
        end
    end

    print("ğŸ”„ Äang tÃ¬m server cÃ³ Haki Legendary...")
    local servers = getServers()

    for _, serverID in ipairs(servers) do
        print("ğŸš€ Äang chuyá»ƒn server...")
        TeleportService:TeleportToPlaceInstance(game.PlaceId, serverID, LocalPlayer)
        wait(10) -- Äá»£i Ä‘á»ƒ load game
        if isHakiLegendaryAvailable() then
            if buyHakiLegendary() then
                print("âœ… ÄÃ£ tÃ¬m tháº¥y vÃ  mua Haki Legendary!")
                return
            end
        end
    end

    print("âŒ KhÃ´ng tÃ¬m tháº¥y Haki Legendary, thá»­ láº¡i...")
    wait(5)
    autoHop() -- Láº·p láº¡i náº¿u chÆ°a tÃ¬m tháº¥y
end

-- Cháº¡y script
autoHop()
